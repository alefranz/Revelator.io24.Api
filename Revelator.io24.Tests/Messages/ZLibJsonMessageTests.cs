using NUnit.Framework;
using Revelator.io24.Api.Models;
using System;
using System.Text.Json;

namespace Revelator.io24.Tests.Messages
{
    internal class ZLibJsonMessageTests
    {
        [Test]
        public void Test2()
        {
            var zm = "554300012d095a4d66006800230900007801ed5a6b6fdb3816fd2b863edb29299112b5dfecdad9e92eb21b34dd6281a22818998985ca92ad479a4cd0ffbee792922c3b76fa98194c67517d68e52b3e2e0fcf7d9179f4d2a5f7b79177f59027abb2c8d35f8d37f692559a2d4b93e3cba3b74cf56d5e54759a54f6f79dce1ae35eb78d291fe6e6bab9bd3055a56fad989db1cf9fc7de6d565cebecb0c76655e4a6ba2a137c606772ec39c145531b2b61636f0d2deaa29c652627d56c2bdddcf30febb42c8bf2c35aa7a418a6197b90fbc7e445536f9a7a6e32fdd0351d88660da96f0770d3bf2db266ed14903ca6c7e781cf55a8541c0a258288342d4d65ea5953d7457e512c7b7da103a93f14918aff6eeae1b063cfe4fa3a332f573acf4d36adaaf49696c181d6d8abea32cd6f1da84f15458352e70edd47efc9f7476fbd4364adef316a40e02ccd8d5b26fa1f51fe483728d37523bdac62ba6e377b302fe94d5fb33427181ef70993acb8150e8892acf2660da1779126e057ae2dda1e5e9bca94ddcf5749918f4697650179653293d4e862b7693de0c74a97cb4fba3443cedced36300a24c3c345c024e72212218bedfe1de35592a59b6e0e2ce6e3f07dadabda949dc401f8a153f56553d5c59af42cb2a26b93516b8ba1b6dbfb8168fb54e4f722f7999da93012209d88a48862eecb380a65e88373c46f3bfac955e9a62e6e0716013df57ad34ba450011e111289792c942fc06b4b67edac08b3d03a4db16905a0c0f97fa776566283feb481f12f2bc2c9aeedfa6183e5cdaf2ebb269bb24860fe20704b6efb81b44feaf4ce5c5abbb9ca8afa55be34c44e677956fc4b51ffd3f436ea4076b237699d11b9bcab4c6f468b6445ac700d682cfb99c0f5faad38f848c0797373a39bac7eda35a0af4fc5a2150b75873732823ddbc3143b748f18506897d61b1ee80d5f4666edd18e9c314c9834e59d5d17198f2e21595b178c9e98eb146447e6b29bd14f45e6b8e7b68b0d59cfa337b042b35dc36f914fb66a26c57ad309ec60d527bd21a1d9ba261872e89876dddf7957b5ce973044a87f4964c792c6dedb34af1104bcf7506530f65eeb37cd35353d5fbcf1de93ce3769e6ac6c4fd3d5c6b92e1e8471c861c29c07d29741cc6016d4ed166ee9707945eb4fc7de47f390a560751f27cc3dd8bdb4d66c578a06fdc4ec4c909be05c295f455120622503c99d01d62bd07455642e12f94a465cf8b112b058164b58acdf5aaa75d01636a86b4348ac148b6216712604e289353a5dd73a715e26e45c72e64761140b1104d239a9126e4f57b434a815401e4692633c21a230e0aa6fa6eb94dc8e5d4c69960d2cad5bbe6502e0b7f0241976e7950df18ffc5c057cf1924f666afa7222168b78329dcb602285ef47d37319cca5fa8cbd1930a61b73eca53902aa554b020125431590427118f710b80061db44889e68056c64a45818eca2e8008128e0118b7cb83e1e442a5282477168611aa2a0222183c08f25a6134c8531feb5beb16c31b05c3ec0c05260b0c37064079c20942ccf11bc06184dd9544d59a8265c9cb38998313199cdc2f3c914d8f9f19c2dd462718091d9ea2cdb0165b6f5c3c690676267e47af188c0878317608354e08e8d46664b1ec135138287f4f8611c303f08150fdb359aedd63591008b054a20a48174432a98ed4d69da564cf93c066122b03764202876a19fef1a1650d8192d6bccd60a36347e2b20c5fbe0e41474d14758f5c2101b1a08a5b88cfbad8286aecd973474ad026c7728b19b8873d8c53ed0b5dae483e99d7aae1bf6cfe14a6ebbd596f0a39f30140af878641c3211c254a2d65350afad6b1331e98722f4a318b6c608a6ce721d80ae95f2e3089c0e14d2403803dea60e9d7683d99d76ae57af1d458f8176f4d3a6afd062f04efbe57e421985f80c6a4560072caa277737a36b67277033b602a26f96aed31a53ec794e2b34c8e43b55f63d580c7c60bd64b681e0310c18d6858c0351eea917b92bd2c4dcdc1f892437f75de078067da8380c1fbb3eefbc79d12017a6e0373793374d6e5fdf1609c213095f23971821a16e328d4a80c2858d12956d4f39bd0d1dad7a1681a10dc70a9e6ea6ce27733e5713110664c330643286e9b9cffd60111cd8b085cb3a128d54b2834e27ba2c5353925d1cca681321636770619c855118332560be00b577f656411739b0837a9dbae4e75478a03d75394c65d734f0c34e6ce70bb9841f004503064f0077d9dbd05ad7c9ca549736b102622e8a1c9617fd50efbc5959e865823417b8027c546b636f9a14486dd364f4f726ad6d7ab2a044bc1c4ada383fead2bdf15e8e363735367439ea467c5d5c1734439fa72dd69bfa0182e7ffc716db48b6220fb047f1af2b265ae5463e663a5a4c5843fd218a89e13e7c4d3de188da9718bd8b6ccb0d70f2540df49beb09f0b8ab13fe98c2c1eecaa92cd82edc11f877281c400c37565f4f1092478a02f2f27bc672d08d7cf2a0d270b50374853d0fea7674fa736b079faafba3e70350f467edd086ee833c1129c4f3b5831211f2ad98513a2125722f64bc36a0ee075e24f3d20f94cf506230a468711776e96007fc61675f5b37209314281d9054237b08e4aeb81866cd749c8027624874c2280a11f4901ab9e4fa67ed00b374f59375280799cfcfdae167ed600bcc9fb5c3be0bfb036a87c3e4f4f7ad11a8fee88faf7743dba36b17c29f4bb46db07c9a51234139286cdc50f0e1df9f51cf704ab3cbb8afec79eca84bc591a7b492cb54e7740cdafe9cff03efcf67d187df6d564d7975892cbda422f11b0eef2f517a5dd3f9d5c913fc418ba339b7f5b73f44cebd3b18fe9a8cdb65a5bf29e3b6d729c933d5ccdbb4ac1b9d8da6a7e1bd682a7b7ff27f85ade5049d21dfe67461f23dd54c8b2de5e9c72bc50edbd9696c874d8ee2fb35f522f98c23d797df7dcdf467b094bcc3cdfdf7f887d7e6ce94d7a721eebfff45f1fd2253b1fd3b06bbf30bfcfe3627fb9fabd988bfa0538beeae11afc35bd25f8c5eba6bebd1054e944e9c6efc889e16a6d1de957ee9648740085e88d3205cd5544dff95012008da3f65f886107c4157bd27a971b531faa329e99cf4a889fde8a470aee7b4bdec1d5294cedb1cb8fcddc177457fcb428575e88a6114c152e1568af57730ee40d6f9f5cd87fe44173780f6112c40952ea5eff77f4380540f17a8ed1f95e0a4179777b80ea11b1e2614ee5b224687e964f978b00948750c1d003f0e4ec2dfbdf3fe853f82c11eed4c7dc7777a932fc2f66bf44279efdf7ffefc3fec7e18cf";
            var bytes = Convert.FromHexString(zm);
            var header = new TcpHeader(bytes);
            Assert.AreEqual("ZM", header.Message.MessageType);

            var jsonMessage = new ZLibJsonMessage(header.Message.Data);
            var jsonElement = JsonSerializer.Deserialize<JsonElement>(jsonMessage.Json);
            Assert.AreEqual(JsonValueKind.Object, jsonElement.ValueKind);
        }
    }
}
